# Bitmap
Bitmap是对位图的抽象。

形象地来说，我们在手机屏幕上所看到的图片就是由一个个像素点拼接而成的，每个像素点的都是用不同数量的二进制位来表示，而**Bitmap就是用来保存这些二进制位**。

# Bitmap占用内存分析
## 屏幕密度的相关概念
**像素px：**

如果我们近距离地看手机屏幕，就可以发现它有一个个小点，**每一个小点就表示一个像素**，我们通常称它为px。

**屏幕分辨率：**

指的是屏幕的上的**像素总和**，例如常说的某某手机屏幕分辨率为1920 * 1080，也就是说它的高有1920px，宽为1080px，像素点总和就是1920 * 1080px。

**屏幕尺寸：**

指的是**屏幕的对象线长度**，这里的长度不是用px为单位，而是用**英寸**为单位的，它和我们平时说的米、厘米是一个概念。

**ppi：**

英文名为pixel per inch，中文全称为**每英寸屏幕上的像素数**，它决定了屏幕的质量，通常是按手机的对角线来计算的，也就是说，它等于**对象线的像素个数除以对角线的长度（单位为英寸）。**

**dp/dip：**

英文名为density-independent pixel，这是安卓特有的概念，它和px的作用相同，都是用来表示长度。但是它和**硬件屏幕无关**，如果需要转换为px，那么1dp在屏幕上最终会显示为**(ppi / 160)个px**。

**dpi：**

英文名为dot per inch，中文全称为**每英寸图片上点的个数**，它决定了**图片的质量**，比如dpi为320，那么最终在手机上一张320 * 320的图片就会用320 * 320 * (dpi / 160)个像素点来表示。

## drawable文件夹内的图片
说起dpi，自然就会想到res文件夹下的drawable-?文件夹，我们在平时开发中会发现，如果将同一大小的图片，放在不同的drawable文件夹下，最终在屏幕上展现的大小是不一样的。

这其实是Android在读取资源的时候，会根据文件夹的不同，给每个文件夹定义一个叫做density的属性，根据最终找到的资源所在的文件夹位置，会有以下几种情况：

- 存在于和手机所匹配的dpi文件夹：不进行缩放。

- 存在于非drawable-nodpi其它的dpi文件夹：那么最终的长度变为(原始长度 / 所在文件夹density) * 匹配文件夹density

- 存在drawable-nodpi：不进行缩放。

而每个ARBG位的二进制个数相乘，就是图片所占内存的大小，对应的density如下：
```
drawable-nodpi：不缩放

drawable-ldpi：0.75

drawable：1

drawable-mdpi：1

drawable-hdpi：1.5

drawable-xhdpi：2

drawable-xxhdpi：3

drawable-xxhdpi：4
```

## Bitmap.Config
这是一个枚举类型，它用来描述每个像素是如何被保存的，它会影响图片的质量并决定能否表示透明/半透明颜色。

- ALPHA_8：每个像素点仅表示alpha的值，它不会存储任何颜色信息，占8位。

- RGB_565：每个像素用5位R/6位G/5位G来表示，占16位。

- ARGB_8888：每个像素分别用8位存储ARGB，占32位。

- ARGB_4444：和8888类似，只不过对于每个通道是使用4位表示，因此它的图片质量比较低，已经不推荐使用了。


# Bitmap所占内存大小其实由两个因素决定：

    第一点的影响因素有：原始图片的宽高、手机内置的dpi、图片所放位置。

    第二点的影响因素有：Bitmap所对应的Bitmap.Config配置。

**总结：**

- 把资源放在和它对应的dpi文件夹，和放在drawable-nodpi文件夹是相同的。

- 我们使用RGB_565时，实际占用的是一个字节。

- 当将资源文件放在别的文件夹时，无论选择哪种Options，都是采用占用4字节的方式。

- 当资源放在对应的dpi文件夹下和drawable-nodpi文件夹下时，长宽不进行缩放。

- 当资源放在除以上两类的文件夹下时，缩放的倍数为匹配文件夹density/所在文件夹density，以上面3.5.2的720 * 1280手机为例，原始的图片的长宽为48，其匹配文件夹的density为2，所在文件夹的density为3，所以缩放倍数为2/3，因此，最后的长宽为32。

- Bitmap所占内存大小就等于它的长宽乘以每个像素所占位数。


